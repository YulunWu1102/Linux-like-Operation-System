 #include "speaker.h"

uint32_t time_zero = 0;
 
void play_sound(uint32_t nFrequence) {
uint32_t divide;
    uint8_t temp;

    if (nFrequence == 0) return;

    // Set the PIT to the desired frequency
    divide = PIT / nFrequence; 
    outb(0xb6, 0x43);
    outb((uint8_t) (divide), 0x42);
    outb((uint8_t) (divide >> 8), 0x42);

    
    // set last three bits of inb(0x61) to one and send back to 0x61 to start playing
    temp = inb(0x61);
    if (temp != (temp | 3)) {
        outb(temp | 3, 0x61);
    }
}


//make it shutup
void nosound() {
    // set last three bits of inb(0x61) to zero and send back to 0x61 to stop playing
    outb(inb(0x61) & 0xFC, 0x61);
}


void timer_wait(uint32_t time){
    sti();
    // wait thill timer comes to end
    while(time_zero < time);
    cli();
    time_zero = 0;
}

void timer_add(){
    time_zero++;
}


void windows_start(){
    // START
    play_sound(Ds5);
    timer_wait(ONE_SEC / 4 + ONE_SEC / 24);
    nosound();
    play_sound(As4);
    timer_wait(ONE_SEC * 2 / 3);
    nosound();    
    play_sound(Gs4);
    timer_wait(ONE_SEC / 2 + ONE_SEC / 12);
    nosound();
    play_sound(Ds5);
    timer_wait(ONE_SEC / 3);
    nosound();
    play_sound(As4);
    timer_wait(ONE_SEC * 2 / 3);
    nosound();
}

void switch_sound(){
    // START

    play_sound(1);
    timer_wait(ONE_SEC/16);
    nosound();

    play_sound(G4);
    timer_wait(ONE_SEC/16);
    nosound();

    play_sound(C5);
    timer_wait(ONE_SEC/16);
    nosound();    

    play_sound(E5);
    timer_wait(ONE_SEC/16);
    nosound();

    play_sound(G5);
    timer_wait(ONE_SEC/16);
    nosound();
    
    timer_wait(ONE_SEC/8);

    play_sound(E5);
    timer_wait(ONE_SEC/16);
    nosound();

    play_sound(G5);
    timer_wait(ONE_SEC/8);
    nosound();
}

void show_boot_pic(){
   char pic[80 * 32] = {
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ',' ','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&',' ',' ','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(',' ',' ','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&',' ',' ','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(',' ',' ','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&',' ',' ','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(',' ',' ','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&',' ',' ','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(',' ',' ','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','%','%','%','%','%','%','%','%',' ',' ','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(',' ',' ','%','%','%','%','%','%','%','%','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&',' ',' ','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(',' ',' ','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&',' ',' ','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(',' ',' ','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&',' ',' ','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(',' ',' ','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&',' ',' ','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(',' ',' ','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&',' ',' ','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(',' ',' ','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&',' ',' ','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(',' ',' ','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&',' ',' ','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(',' ',' ','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&',' ',' ','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(',' ',' ','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&',' ',' ','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(',' ',' ','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&',' ',' ',' ',' ',' ',' ',' ',' ',' ','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(',' ',' ',' ',' ',' ',' ',' ',' ',' ','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&',' ',' ','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(',' ',' ','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&',' ',' ','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(',' ',' ','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&',' ',' ','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(',' ',' ','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&',' ',' ','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(','(',' ',' ','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n',
                        '&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','&','\n'
};
    printf("%s\n", pic);
    windows_start();
}

